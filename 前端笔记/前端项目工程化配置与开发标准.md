本指南为基于 **Vue 3 + TypeScript** 技术栈的项目提供了统一的工程化配置和开发规范。请严格遵循以下标准，以确保项目代码质量、开发效率和维护性。

---

### **I. 基础工程化工具与环境**

#### **1. 代码质量与规范**

*   **静态分析：** 项目已集成 **ESLint** 进行代码自动校验。请遵循 ESLint 报告的规范要求，确保代码符合约定。
*   **代码美化：** 项目已集成 **Prettier** 进行代码自动格式化。所有代码提交前必须通过 Prettier 格式化。
*   **类型安全：** 项目已集成 **TypeScript** 进行类型校验，确保代码的类型正确性。
*   **工具联动：** ESLint 和 Prettier 已配置协同工作，无需手动处理冲突。
*   **页面设计：**： 去除ai的emoij图标，整体设计风格参照苹果官网：@https://www.apple.com/store?afid=p240%7Cgo~cmp-21644513200~adg-172212795829~ad-779210733301_kwd-22671391~dev-c~ext-~prd-~mca-~nt-search&cid=aos-us-kwgo-brand-brand-preorder-101525-
*   **页面布局**：     header文字顶格设计，卡片文字需居中，表格默认支持分页
*   **包名安装：**： 全部使用cnpm进行安装
*   **mcp使用：**： 在每次创建完代码后都需要通过Playwright自我检查页面是否满足我的要求，且所有接口都能正常调用，编写完整的测试用例和 监听控制台 的监听器，确保每次报错都能识别并修正
	

#### **2. 环境与部署配置**

*   **环境文件分离：** 项目根目录必须包含以下环境配置文件，用于分离 API 地址等环境变量：
    *   `.env.development`: 开发环境配置
    *   `.env.staging`: 预发环境配置
    *   `.env.production`: 生产环境配置
*   **构建脚本：** `package.json` 必须包含明确区分环境的脚本：
    ```json
    "scripts": {
      "dev": "vite",
      "build:staging": "vite build --mode staging",
      "build:prod": "vite build",
      "lint": "eslint . --ext .vue,.js,.ts --fix"
    }
    ```

---

### **II. 技术栈核心规范**

#### **1. UI 组件库**

*   **选型：** 统一使用 **Ant Design Vue (v4.x)** 作为项目的UI组件库。
*   **集成：** 确保在项目主入口文件 `main.ts` 中进行全局引入和注册，并导入其重置样式 (`dist/reset.css`)。
*   **验证：** 引入并渲染任意 Ant Design Vue 组件，确认其功能和样式正常显示。

#### **2. Vue 开发模式**

*   **API 风格：** **强制使用** Vue 3 **组合式 API (Composition API)** 进行组件开发，避免使用选项式 API。
*   **Script 语法：** **统一采用** `<script setup lang="ts">` 语法糖，以简化组件编写。

---

### **III. 项目架构与目录结构**

项目采用以下标准目录结构：

```
BIGDATA-ORION-PLATFORM/
├── .claude/                 # Claude AI 配置
├── .vscode/                 # VSCode 配置
├── dist/                    # 构建输出目录
├── node_modules/            # 依赖包
├── public/                  # 静态资源
│   └── favicon.ico
├── src/
│   ├── api/                 # API 请求函数（按模块划分）
│   ├── assets/              # 项目资源文件（图片、样式等）
│   ├── components/          # 全局通用组件
│   ├── layouts/             # 全局布局组件
│   ├── pages/               # 页面组件
│   ├── router/              # 路由配置
│   │   └── index.ts
│   ├── stores/              # Pinia 状态管理
│   │   ├── counter.ts
│   │   ├── requestCounter.ts
│   │   └── user.ts
│   ├── types/               # TypeScript 类型定义
│   ├── App.vue              # 根组件
│   ├── main.ts              # 应用入口
│   └── request.ts           # Axios 统一封装
├── .editorconfig            # 编辑器配置
├── .eslintrc.js             # ESLint 配置
├── .gitignore               # Git 忽略配置
├── .prettierrc.json         # Prettier 配置
├── index.html               # HTML 入口
├── package.json             # 项目依赖配置
├── README.md                # 项目说明文档
├── tsconfig.json            # TypeScript 配置
├── tsconfig.app.json        # 应用 TS 配置
├── tsconfig.node.json       # Node TS 配置
└── vite.config.ts           # Vite 配置
```

#### **目录职责说明**

*   **`src/api/`**: 存放所有 API 请求函数，按业务模块划分（如 `user.ts`, `product.ts`）
*   **`src/assets/`**: 存放静态资源文件（图片、字体、全局样式等）
*   **`src/components/`**: 存放全局可复用的 UI 组件
*   **`src/layouts/`**: 存放全局布局组件（如 `BasicLayout.vue`）
*   **`src/pages/`**: 存放页面级组件，与路由一一对应
*   **`src/router/`**: 路由配置文件
*   **`src/stores/`**: Pinia 状态管理，按功能模块划分
*   **`src/types/`**: TypeScript 类型定义与数据契约
*   **`src/request.ts`**: Axios 统一封装文件

---

### **IV. 全局布局管理**

#### **1. 布局文件**

*   **布局目录：** 在 `src/layouts/` 目录下创建并维护全局布局组件（如 `BasicLayout.vue`）。
*   **主入口集成：** `App.vue` 仅作为项目的顶层入口，负责引入并渲染全局布局组件或直接使用 `<router-view />`。
*   **结构划分：** 全局布局应使用 Ant Design Vue 的 `<a-layout>` 组件，实现清晰的"头部-内容-底部"结构。

#### **2. 页面内容呈现**

*   **动态内容区域：** 在全局布局的内容区域 (`<a-layout-content>`) 使用 `<router-view />` 承载由 Vue Router 控制的动态页面内容。
*   **样式隔离：** 确保布局组件的样式 (`scoped`) 不会污染内部页面，同时预留足够的边距以避免内容与固定元素重叠。

#### **3. 顶部栏 (Header)**

*   **组件化：** 顶部栏应独立为一个组件 (`src/components/GlobalHeader.vue`)。
*   **内容构成：** 包含项目 Logo、标题、主导航菜单及用户登录状态显示区。
*   **响应式布局：** 利用 Ant Design Vue 的栅格组件 (`<a-row>`, `<a-col>`) 实现 Logo/标题、菜单、用户状态的左右固定-中间自适应布局。

#### **4. 底部栏 (Footer)**

*   **定位：** 全局底部栏应采用固定定位（`position: fixed`）方式，始终保持在页面底部。
*   **内容：** 主要用于展示版权信息或统一链接。

---

### **V. 路由管理**

#### **1. 路由定义**

*   **集中配置：** 所有路由定义应集中在 `src/router/index.ts` 文件中。
*   **命名路由：** 为每个路由定义 `name` 属性，便于路由跳转和维护。
*   **页面关联：** 路由的 `component` 应指向 `src/pages/` 目录下的页面组件。

#### **2. 菜单与路由联动**

*   **点击跳转：** 全局顶部栏的菜单项点击后，应通过 `vue-router` 的 `router.push()` 方法进行页面跳转，`key` 值与路由 `path` 对应。
*   **高亮同步：** 菜单的选中状态应与当前路由路径保持同步，利用 `router.afterEach` 路由守卫机制实现刷新或跳转后的菜单自动高亮。
*   **未来优化：** 鼓励探索将菜单配置与路由配置进行统一管理的方式，减少重复定义。

---

### **VI. API 服务层**

#### **1. HTTP 请求库**

*   **选型：** 统一使用 **Axios** 作为 HTTP 请求库。
*   **安装：** 确保项目中已安装 Axios 依赖。

#### **2. 全局请求配置**

*   **统一封装：** 在 `src/request.ts` 文件中对 Axios 进行封装。
*   **基础配置：** 设定统一的 `baseURL`、`timeout`。
*   **跨域认证：** 必须设置 `withCredentials: true` 以确保请求携带 Cookie，支持会话管理。
*   **请求拦截器：** (可选) 可用于统一处理请求头、token 注入等。
*   **响应拦截器：** 必须实现响应拦截器，用于：
    *   统一处理后端返回的数据格式，如解构 `data` 字段。
    *   统一处理 API 错误码，如在收到未登录状态码时（如 `40100`）自动跳转到登录页面，并携带 `redirect` 参数。

#### **3. API 模块化**

*   **目录结构：** 在 `src/api/` 目录下，按功能模块（如 `user.ts`, `product.ts`）划分并编写 API 请求函数。
*   **调用方式：** API 函数应封装为易于调用的异步函数，返回 Promise。
*   **类型定义：** API 的请求参数和响应数据类型应在 `src/types/` 中定义。

#### **4. 跨域问题**

*   **解决方案：** 如果遇到前端请求与后端服务之间的跨域问题，应首先检查后端是否已正确配置 CORS。

---

### **VII. 全局状态管理**

#### **1. 状态管理库**

*   **选型：** 统一使用 **Pinia** 作为全局状态管理解决方案。
*   **集成：** 在 `main.ts` 中进行 Pinia 的初始化和注册。

#### **2. 模块化 Store 定义**

*   **目录结构：** 在 `src/stores/` 目录下，按业务模块（如 `user.ts`、`counter.ts`）定义独立的 Pinia Store。
*   **核心内容：** 每个 Store 应包含：
    *   **状态 (state)**: 使用 `ref()` 定义响应式数据。
    *   **动作 (actions)**: 封装异步逻辑（如 `fetchLoginUser`）。
    *   **修改 (mutations)**: 包含同步修改状态的逻辑。

#### **3. 状态消费**

*   **全局初始化：** 在 `App.vue` 中，可在项目启动时通过 Store 的 action 异步获取并初始化全局状态（如登录用户信息）。
*   **组件使用：** 在任何组件中通过 `useStore()` 访问和修改全局状态，如在 `GlobalHeader` 中显示用户登录状态。

---

### **VIII. 代码契约与溯源 (重构原则)**

为了在未来的结构性重构中保持"行为不变"，必须遵守以下契约：

#### **1. 类型定义**

*   API 的请求参数和响应数据的 TypeScript 类型/接口定义，必须集中存放在 `src/types/` 目录下，作为前后端的数据契约。

#### **2. 溯源注释**

*   在关键文件（如 `src/api/` 和 `src/stores/`）的顶部，建议插入以下注释模板。当进行代码迁移或重构时，在此记录溯源信息：
    ```typescript
    /**
     * @REFACTOR_TRACE_REQUIRED
     * 行为不变（强约束）：请在此记录结构迁移信息。
     * 原: [旧文件路径]:[行号] → 新: [新文件路径]
     */
    ```

---

### **IX. 开发与验证纪律**

#### **1. Playwright 自我检查**

**强制纪律：** 无论是首次创建项目，还是每次完成功能或结构性修改后，都必须使用 Playwright 进行全面自检，确保"行为不变"：

*   **网络检查：** 验证 API 请求的时序、参数和响应数据是否与预期完全一致，确保没有引入新的并发/时序问题。
*   **性能分析：** 监控关键操作的性能指标，确保结构性重构没有导致意外的性能回退。
*   **组件检查 (Playwright)：** 验证组件状态和 Props 传递的正确性，不允许出现状态混乱或意料之外的副作用。

#### **2. AI 重构的核心原则 (最高约束)**

*   **系统性思维优于局部思维** - 分析完整的功能单元，不是单个方法。
*   **行为保持优于代码美化** - 重构的首要目标是保持功能不变。
*   **即时更新调用端** - 每次迁移完成后，立刻批量更新所有引用。
*   **引用溯源 (Traceability)** - 对每段迁移代码记录来源映射。

---

### **X. 配置文件清单**

项目根目录必须包含以下配置文件：

| 文件名 | 说明 |
|--------|------|
| `package.json` | 项目依赖与脚本配置 |
| `vite.config.ts` | Vite 构建工具配置 |
| `tsconfig.json` | TypeScript 主配置 |
| `tsconfig.app.json` | 应用代码 TS 配置 |
| `tsconfig.node.json` | Node 环境 TS 配置 |
| `eslint.config.js` | ESLint 规则配置 |
| `.prettierrc.json` | Prettier 格式化配置 |
| `.editorconfig` | 编辑器统一配置 |
| `.gitignore` | Git 忽略文件配置 |


